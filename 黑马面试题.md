- 事务
  - spring事务失效的场景
     - 异常捕获处理，自己处理了异常，没有抛出，解决方案就是手动抛出
     - 抛出检查异常，配置rollbackFor属性改为Exception
     - 非public方法导致的事务失效，改为public
  - springbean的生命周期：
  - 
     - 通过BeanDefinition获取bean的定义信息
     - 调用构造函数实例化bean
     - bean的依赖注入
     - 处理Aware接口
     - bean的后置处理器beanpostProcessor-前置
     - 初始化方法(InitializingBean、init-method)
     - bean的后置处理器beanpostProcessor-后置
     - 销毁bean
   - spring-bean的循环依赖
- mybatis
   - mybatis执行流程：
     - 1.读取Mybatis配置文件：mybatis-config.xml加载运行环境和映射文件
     - 2.构建会话工厂sqlSeessionFactory
     - 3.会话工厂创建SqlSession对象
     - 4.操作数据库的接口，Executor执行器，同时负责查询缓存的维护
     - 5.Executor接口执行的方法中有一个mapperStatement类型的参数，封装了映射信息
     - 6.输入参数映射
     - 7.输出参数映射
   - mybatis是否支持延迟加载
      支持，但是默认不开启。
     延迟加载的原理：
       - 使用CGLIB创建目标对象的代理对象
       - 当调用目标方法时，进入拦截器invoke方法，发现目标方法是null值，执行sql查询
       - 获取数据以后，调用set方法设置属性值，再继续去查询目标方法，就有值了。
   - 
- redis的双写一致性问题：
 - 问题引起：就是更新数据库的同时要更新缓存，以保证数据的一致性。但是在并发情况下，可能会出现数据库和缓存不一致的问题
  - 解决方案一：延迟双删
    - 思想：在更新数据库和删除缓存后再删除一边缓存
    - 实现的方式：通过消息队列的延迟消息实现：在更新操作的末尾，生产一条删除 Redis 中指定缓存的延迟消息，然后让消费者去消费这条消息，删除 Redis 中指定的缓存
    - 存在的问题：在集群模式下，可能还是会读到数据不一致的问题
    - 优点：性能高，实现简单，保证了数据的最终一致性
    - 缺点: 无法保证数据的强一致性
    - 适用的场景：允许数据短暂不一致、对性能要求较高 的场景，大多数生产场景都是如此，比如文章浏览量的更新
  - 解决方案二：使用 Canal 监听 MySQL 从节点的数据变化
    - 思想：当MySQL从节点更新时，通知redis删除缓存
    - 实现方式：类似于 MySQL 的 主从复制机制：将主数据库的 binlog (二进制日志) 传输到从数据库，从数据库根据 binlog 修改数据，从而实现数据的同步。
    - 优点：
       - 无代码侵入性
       - 数据的一致性相较方案一更强：MySQL 从节点中的数据被更新时，Canal 通知 Redis 删除缓存，这样依赖，本方案的删除时刻 就会比 方案一中延迟删除时刻 早一点，删除时刻 是 数据更新完毕(主从同步之后)的时刻。
    - 缺点：Canal 通过直接解析 MySQL 的 binlog 文件来获取数据变更，避免了频繁地查询数据库表，减少了对数据库的压力。
    - 适用场景：本方案也适用于 允许数据短暂不一致、对性能要求较高 的场景。
  - 解决方案三：读写锁
     - 思想：既然查询和更新操作并发会影响数据的一致性，那么直接禁止查询和更新操作并发即可，这时就可以给查询操作加上读锁，给更新操作加上写锁。读锁：共享锁，只会与排他锁发生排斥，与共享锁不会发生排斥；写锁：排他锁，与所有锁发生排斥
     - 实现方式：使用Redisson 框架提供的读写锁(readLock和writeLock)
     - 优点：保证了数据的强一致性：查询操作和更新操作不是并发的，从根源上避免了双写不一致的问题
     - 缺点：对代码的侵入性比较大，性能也比较差
     - 使用场景：根钱相关的业务。
- redis的分布式锁问题：
- redis的主从复制问题：
- redis的脑裂，哨兵模式，分片集群，数据读写规则

- MQ的问题：
   - 在MQ中如何解决消费重复消费的问题？或者是生产者发送错误的问题？
     - 解决方案：幂等性设计
   - 
- springcloud的问题：
   - 在分布式场景下，如何去排查定位问题：可以通过APM(应用性能管理)工具去定位
     - Zipkin：它是Twitter的调用链分析工具，特点是轻量且部署简单，缺点是对代码有侵入性
     - Pinpoint：它是韩国人开源的基于字节码注入的调用链分析工具，特点是支持多种插件，UI功能强大，接入端无代码侵入
     - SkyWalking：它是国内应用比较广泛的基于字节码注入的调用链分析以及应用监控分析工具，特点是支持多种插件，UI功能强大，接入端无代码侵入。目前厂商使用的比较多，版本更新比较快
- 

  
